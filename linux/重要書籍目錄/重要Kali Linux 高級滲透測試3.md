# [Kali Linux 高級滲透測試, 3/e](https://www.tenlong.com.tw/products/9787111659471) 
- [Mastering Kali Linux for Advanced Penetration Testing: Secure your network with Kali Linux 2019.1 – the ultimate white hat hackers' toolkit, 3/e](https://www.packtpub.com/product/mastering-kali-linux-for-advanced-penetration-testing-third-edition/9781789340563)
- Vijay Kumar Velu, Robert Beggs

```
第1章基於目標的滲透測試 1
1.1 安全測試概述 1
1.2 漏洞掃描、滲透測試和紅隊訓練的誤解 2
1.3 基於目標的滲透測試 2
1.4 測試方法 3
1.5 Kali Linux簡介：特徵 5
1.6 安裝和更新Kali Linux 6
1.6.1 在便攜式設備中安裝Kali Linux 6
1.6.2 在Raspberry Pi 3中安裝Kali 7
1.6.3 在虛擬機中安裝Kali 7
1.6.4 在Docker中安裝Kali 10
1.6.5 在AWS 雲中安裝Kali 11
1.7 組織Kali Linux 14
1.7.1 配置和自定義Kali Linux 14
1.7.2 重置級用戶密碼14
1.7.3 添加普通用戶15
1.7.4 配置網絡服務和安全通信15
1.7.5 調整網絡代理設置16
1.7.6 訪問安全外殼協議17
1.7.7 加速Kali運行18
1.7.8 與主機操作系統共享文件夾18
1.7.9 使用Bash腳本來定制Kali 20
1.8 構建驗證環境20
1.8.1 安裝預定目標20
1.8.2 創建活動目錄及域控制器22
1.9 使用Faraday管理合作滲透測試25
1.10 小結27

第2章開源情報和被動偵察28
2.1 偵察的基本原則29
2.1.1 開源情報29
2.1.2 進攻型OSINT 29
2.1.3 利用Sublist3r收集域資料30
2.1.4 Maltego 31
2.1.5 OSRFramework 34
2.1.6 Web archives 35
2.1.7 抓取35
2.1.8 收集用戶名和電子郵件地址36
2.1.9 獲取用戶信息36
2.1.10 Shodan和censys.io 37
2.2 Google黑客數據庫38
2.2.1 使用dork腳本來查詢Google 38
2.2.2 Data dump網站39
2.2.3 使用腳本自動收集OSINT數據39
2.2.4 防守型OSINT 40
2.2.5 分析用戶以獲取密碼列表42
2.3 創建自定義單詞列表來破解密碼43
2.3.1 使用CeWL來映射網站43
2.3.2 使用twofi從Twitter提取單詞44
2.4 小結44

第3章外網與內網的主動偵察45
3.1 秘密掃描策略46
3.1.1 調整源IP棧和工具識別設置46
3.1.2 修改數據包參數47
3.1.3 使用匿名網絡代理48
3.2 DNS偵察和路由映射51
3.3 利用綜合偵察應用程序52
3.3.1 recon-ng框架53
3.3.2 使用IPv6專用工具56
3.3.3 映射路由到目標57
3.4 識別外部網絡基礎設施59
3.5 防火牆外映射60
3.6 IDS / IPS識別61
3.7 枚舉主機63
3.8 識別端口、操作系統和服務63
3.9 使用netcat編寫自己的端口掃描器64
3.9.1 指紋識別操作系統65
3.9.2 確定主動服務66
3.10 大規模掃描66
3.10.1 DHCP信息67
3.10.2 內部網絡主機的識別與枚舉67
3.10.3 本地MS Windows命令68
3.10.4 ARP廣播70
3.10.5 ping掃描70
3.10.6 使用腳本組合masscan和nmap掃描71
3.10.7 利用SNMP 72
3.10.8 通過服務器消息塊會話獲取Windows賬戶信息74
3.10.9 定位網絡共享74
3.10.10 主動偵察目錄域服務器75
3.10.11 使用綜合工具76
3.10.12 SPARTA配置實例76
3.11 小結77

第4章漏洞評估78
4.1 漏洞命名78
4.2 本地和在線漏洞數據庫79
4.3 用nmap進行漏洞掃描82
4.3.1 Lua腳本介紹83
4.3.2 自定義NSE腳本83
4.4 Web應用漏洞掃描器85
4.4.1 Nikto和Vega簡介85
4.4.2 定制Nikto和Vega 87
4.5 移動應用漏洞掃描器89
4.6 網絡漏洞掃描器OpenVAS 92
4.7 商業漏洞掃描器94
4.7.1 Nessus 94
4.7.2 Nexpose 96
4.8掃描器97
4.9 威脅建模98
4.10 小結99

第5章社會工程學和物理安全101
5.1 方法論和攻擊方法102
5.1.1 基於技術的攻擊103
5.1.2 基於人的攻擊103
5.2 控制台上的物理攻擊104
5.2.1 samdump2和chntpw 104
5.2.2 粘滯鍵107
5.3 創建流氓物理設備108
5.4 社會工程學工具包112
5.4.1 使用網站攻擊媒介——憑據收割機攻擊方法114
5.4.2 使用網站攻擊媒介——標籤釣魚攻擊方法116
5.4.3 HTA攻擊118
5.4.4 使用PowerShell字母數字的shellcode注入攻擊120
5.5 隱藏可執行文件與偽裝攻擊者的URL 121
5.6 使用DNS重定向升級攻擊121
5.6.1 魚叉式網絡釣魚攻擊122
5.6.2 使用Gophish設置網絡釣魚活動126
5.7 發起網絡釣魚攻擊127
5.8 利用bulk轉換發起網絡釣魚攻擊128
5.9 小結129

第6章無線攻擊130
6.1 為無線攻擊配置Kali 130
6.2 無線偵察131
6.3 繞過隱藏的服務集標識符135
6.4 繞過MAC 地址驗證和公開驗證137
6.5 攻擊WPA和WPA2 138
6.5.1 暴力破解138
6.5.2 使用Reaver攻擊無線路由器141
6.6 無線通信的拒絕服務攻擊142
6.7 破解WPA/WPA2企業版實現143
6.8 使用Ghost Phisher 151
6.9 小結152

第7章基於Web應用的利用153
7.1 Web應用程序攻擊方法153
7.2 黑客的思維導圖154
7.3 Web應用的偵察156
7.3.1 Web應用防火牆和負載均衡器檢測157
7.3.2 指紋識別Web應用和CMS 158
7.3.3 利用命令行設置鏡像網站160
7.4 客戶端代理161
7.4.1 Burp代理161
7.4.2 Web抓取和目錄的暴力破解165
7.4.3 網絡服務專用漏洞掃描器165
7.5 針對特定應用的攻擊166
7.5.1 暴力破解訪問證書166
7.5.2 注入167
7.6 小結177

第8章客戶端利用178
8.1 留後門的可執行文件178
8.2 使用惡意腳本攻擊系統181
8.2.1 使用VBScript進行攻擊181
8.2.2 使用Windows PowerShell攻擊系統184
8.3 跨站點腳本框架185
8.4 瀏覽器利用框架——BeEF 190
8.5 BeEF瀏覽器192
8.5.1 整合BeEF和Metasploit攻擊196
8.5.2 用BeEF作為隧道代理196
8.6 小結198

第9章繞過安全控制199
9.1 繞過網絡訪問控制199
9.1.1 前准入NAC 200
9.1.2 後准入NAC 202
9.2 使用文件繞過殺毒軟件202
9.2.1 利用Veil框架203
9.2.2 利用Shellter 207
9.3 無文件方式繞過殺毒軟件211
9.4 繞過應用程序級控制211
9.5 繞過Windows操作系統控制214
9.5.1 用戶賬戶控制215
9.5.2 採用無文件技術218
9.5.3 其他Windows特定的操作系統控制220
9.6 小結222

第10章利用223
10.1 Metasploit框架223
10.1.1 庫224
10.1.2 接口225
10.1.3 模塊225
10.1.4 數據庫設置和配置226
10.2 使用MSF利用目標230
10.2.1 使用簡單反向shell攻擊單個目標230
10.2.2 利用具有PowerShell攻擊媒介的反向shell攻擊單個目標231
10.3 使用MSF資源文件的多目標利用233
10.4 使用Armitage的多目標利用233
10.5 使用公開的漏洞利用235
10.5.1 定位和驗證公開可用的漏洞利用236
10.5.2 編譯和使用漏洞237
10.6 開發Windows利用239
10.6.1 模糊識別漏洞239
10.6.2 製作Windows特定的利用245
10.7 小結248

第11章操控目標與內網漫遊249
11.1 破解的本地系統上的活動249
11.1.1 對已入侵的系統進行快速偵察250
11.1.2 找到並提取敏感數據——掠奪目標251
11.1.3 後利用工具253
11.2 橫向提權與內網漫遊262
11.2.1 Veil-Pillage 263
11.2.2 入侵域信任與共享265
11.2.3 PsExec、WMIC和其他工具266
11.2.4 利用服務實現內網漫遊270
11.2.5 支點攻擊和端口轉發271
11.3 小結273

第12章提權274
12.1 常見的提權方法概述274
12.2 從域用戶提權至系統管理員275
12.3 本地系統提權276
12.4 由管理員提權至系統管理員277
12.5 憑據收割和提權攻擊280
12.5.1 密碼器280
12.5.2 響應者282
12.5.3 SMB中繼攻擊284
12.6 提升活動目錄中的訪問權限285
12.7 入侵Kerberos——金票攻擊290
12.8 小結295

第13章命令與控制296
13.1 持久性296
13.2 使用持久代理297
13.2.1 使用Netcat作為持久代理297
13.2.2 使用schtasks來配置持久任務300
13.2.3 使用Metasploit框架保持持久性301
13.2.4 使用persistence腳本302
13.2.5 使用Metasploit框架創建一個獨立的持久代理303
13.2.6 使用在線文件存儲雲服務保持持久性304
13.3 前置域310
13.3.1 利用Amazon CloudFront實現C2 310
13.3.2 利用Microsoft Azure實現C2 313
13.4 數據提取315
13.4.1 使用現有的系統服務（Telnet、RDP、VNC） 315
13.4.2 使用DNS協議316
13.4.3 使用ICMP協議318
13.4.4 使用數據提取工具包319
13.4.5 使用PowerShell 321
13.5 隱藏攻擊證據321
13.6 小結323

第14章嵌入式設備和RFID的入侵324
14.1 嵌入式系統及硬件架構324
14.2 固件解包與更新327
14.3 RouterSploit 框架簡介330
14.4 UART 333
14.5 利用Chameleon Mini克隆RFID 335
14.6 小結339
```

