#

- [Linux系统运维指南](https://detail.tmall.com/item.htm?spm=a312a.7700824.w4011-24063788657.109.78974b57SuBNUq&id=615836912660&rn=66d056eccbcdf7f7b11e24cda2dfddbe&abbucket=10)


```
基礎篇
章作業系統的安裝與基礎配置3
1.1作業系統的安裝3
1.1.1準備Linux作業系統安裝檔3
1.1.2配置虛擬機器3
1.1.3安裝CentOS作業系統10
1.2作業系統的基礎配置15
1.2.1修改默認主機名稱15
1.2.2配置IP位址16
1.2.3為系統添加操作使用者16
1.2.4安裝常用軟體17
1.2.5配置Yum源17
1.2.6關閉防火牆服務17
1.2.7關閉SELinux服務18
1.2.8修改SSH服務預設配置18
1.2.9修改檔描述符19
1.2.10登錄超時退出19
第2章Linux系統的目錄及重要檔20
2.1系統目錄及其作用20
2.1.1根目錄結構及其作用20
2.1.2根下常見目錄介紹20
2.2Linux系統的重要檔21
2.2.1網卡設定檔21
2.2.2DNS設定檔22
2.2.3系統hosts檔22
2.2.4主機名稱設定檔23
2.2.5fstab文件23
2.2.6rc.local文件23
2.2.7全域環境變數設定檔24
2.2.8定時任務設定檔24
2.2.9用戶相關的設定檔25
第3章新手必備的系統基礎命令26
3.1系統管理命令26
3.1.1man命令26
3.1.2ls命令26
3.1.3cd命令27
3.1.4useradd命令28
3.1.5passwd命令28
3.1.6free命令29
3.1.7whoami命令30
3.1.8ps命令30
3.1.9date命令31
3.1.10pwd命令33
3.1.11shutdown命令33
3.2檔目錄管理命令34
3.2.1touch命令34
3.2.2cat命令35
3.2.3mkdir命令36
3.2.4rm命令37
3.2.5cp命令37
3.2.6mv命令38
3.2.7find命令39
3.3檔案壓縮與解壓命令40
3.3.1tar命令40
3.3.2zip命令41
3.3.3unzip命令42
3.4磁片管理命令43
3.4.1df命令43
3.4.2du命令44
3.4.3fdisk命令44
3.4.4mount命令45
3.5網路管理命令46
3.5.1ping命令46
3.5.2wget命令46
3.5.3telnet命令47
3.5.4netstat命令47
3.5.5curl命令49
3.5.6ss命令49
3.6系統性能管理命令51
3.6.1uptime命令51
3.6.2top命令51
3.6.3iostat命令53
3.6.4ifstat命令55
3.6.5lsof命令55
3.6.6time命令57
3.7套裝軟體管理命令57
3.7.1yum命令57
3.7.2rpm命令59

第4章Linux檔案系統、用戶與許可權61
4.1檔案系統概述61
4.1.1檔案類型61
4.1.2檔案屬性62
4.2用戶與用戶組63
4.2.1用戶分類63
4.2.2用戶組64
4.3用戶許可權65
4.3.1默認許可權65
4.3.2umask值與默認許可權的關係65
4.3.3如何修改默認許可權66
4.4文件許可權66
4.4.1檔許可權分類66
4.4.2如何修改許可權67

第5章磁片管理68
5.1磁片分類68
5.2磁片的容量計算68
5.3磁碟分割69
5.4磁碟分割工具69
5.4.1fdisk分區工具69
5.4.2parted分區工具70
5.5RAID技術概述71
5.5.1RAID的定義71
5.5.2RAID的級別與分類72
5.5.3RAID的優點72
5.5.4常用RAID對比72

第6章規則運算式與vim編輯器的使用73
6.1什麼是規則運算式73
6.2字元73
6.3文本處理命令74
6.3.1grep命令74
6.3.2sed命令74
6.3.3awk命令75
6.4規則運算式使用示例75
6.5vim編輯器75
6.5.1什麼是vim編輯器75
6.5.2vim編輯器的3種模式76
6.6vim編輯的操作76
6.6.1游標的移動方法76
6.6.2搜索與查找76
6.6.3刪除、複製與粘貼77
6.6.4保存與退出77
LAMP/LNMP架構篇

第7章Apache的安裝與配置81
7.1Apache概述81
7.1.1什麼是Apache81
7.1.2Apache的應用場景81
7.2安裝Apache81
7.2.1安裝環境準備81
7.2.2Apache的安裝過程82
7.3Apache的目錄結構與設定檔84
7.3.1Apache的目錄結構與作用85
7.3.2Apache的主設定檔86
7.3.3Apache的日誌格式與日誌切割86
7.4配置Apache的虛擬主機88
7.4.1配置基於功能變數名稱的虛擬主機88
7.4.2配置基於埠的虛擬主機90
7.5Apache的優化配置91
7.5.1修改預設使用者與組91
7.5.2優化錯誤頁面的顯示內容92
7.5.3隱藏Apache的版本資訊92
7.5.4配置Apache的日誌輪詢93
7.5.5優化網站目錄許可權94
7.5.6開啟Apache防盜鏈功能94
7.5.7禁止PHP程式解析指定網站目錄95

第8章MySQL與PHP的安裝與配置96
8.1MySQL概述96
8.1.1MySQL簡介96
8.1.2MySQL版本96
8.2MySQL的部署過程96
8.2.1MySQL常見的安裝方式96
8.2.2MySQL的安裝與部署97
8.3MySQL的目錄結構與設定檔99
8.3.1MySQL的目錄結構99
8.3.2MySQL的設定檔99
8.4PHP的安裝與配置100
8.4.1準備安裝環境100
8.4.2PHP的安裝過程101
8.4.3配置Apache支援PHP程式103
8.4.4測試配置104
8.4.5PHP目錄105

第9章Nginx的安裝與配置107
9.1Nginx概述107
9.1.1什麼是Nginx107
9.1.2Nginx的功能107
9.1.3Nginx的優點107
9.2安裝Nginx108
9.2.1準備安裝環境108
9.2.2安裝依賴庫109
9.2.3編譯和安裝Nginx109
9.3配置Nginx支援PHP程式111
9.3.1修改設定檔111
9.3.2啟動服務並檢查112
9.4Nginx目錄與設定檔114
9.4.1Nginx目錄結構及其說明114
9.4.2Nginx的設定檔簡介114
9.5配置Nginx虛擬主機115
9.5.1配置基於功能變數名稱的虛擬主機115
9.5.2配置基於IP的虛擬主機117
9.5.3配置基於埠的虛擬主機119
9.6優化Nginx主設定檔120
9.6.1精簡主設定檔120
9.6.2拆分主設定檔121
9.6.3開啟日誌功能122
9.6.4配置Nginxgzip壓縮功能123
9.6.5配置expires緩存功能124
9.6.6優化Nginx錯誤頁面125

0章使用WordPress搭建自己的博客網站127
10.1安裝環境127
10.1.1系統環境127
10.1.2軟體環境127
10.2準備工作128
10.2.1WordPress軟體128
10.2.2配置Nginx虛擬主機128
10.2.3創建WordPress資料庫129
10.3搭建WordPress博客網站129
10.3.1複製網站檔並授權129
10.3.2安裝和配置WordPress130
```
## 應用服務篇
```
1章Linux系統登錄與管理139
11.1SSH服務概述139
11.1.1什麼是SSH服務139
11.1.2SSH服務的認證類型139
11.2SSH服務的操作140
11.2.1SSH服務的安裝與啟動140
11.2.2SSH相關操作命令141
11.3SSH免密登錄實戰142
11.3.1環境配置142
11.3.2生成金鑰對142
11.3.3分發金鑰143
11.3.4測試免密分發資料144
11.4定時任務144
11.4.1什麼是定時任務144
11.4.2crond命令144
11.4.3系統定時任務145
11.4.4定時任務的書寫與配置146
11.5伺服器許可權管理146
11.5.1sudo介紹146
11.5.2/etc/sudoers設定檔147
11.5.3編輯設定檔規範149


2章網路檔案系統（NFS）與資料同步151
12.1網路檔案系統簡介151
12.1.1什麼是網路檔案系統151
12.1.2NFS實現過程151
12.2NFS的安裝與部署152
12.2.1NFS服務端的部署152
12.2.2NFS用戶端的部署154
12.2.3用戶端安全配置156
12.3NFS用戶端掛載優化157
12.3.1掛載參數157
12.3.2優化實例測試157
12.4rsync資料同步服務158
12.4.1rsync服務簡介158
12.4.2rsync服務的安裝與操作命令159
12.4.3rsync資料同步實戰操作160
12.5sersync資料同步服務162
12.5.1sersync服務簡介162
12.5.2sersync服務的工作過程163
12.5.3sersync服務的安裝準備163
12.5.4安裝配置sersync服務164
12.5.5啟動sersync服務166
12.5.6測試資料同步167


3章MySQL服務常用管理169
13.1MySQL的基礎管理操作169
13.1.1MySQL服務的啟動與停止169
13.1.2MySQL服務的登錄和退出169
13.1.3MySQL服務密碼修改與找回171
13.2MySQL資料庫常用管理操作172
13.2.1創建、刪除資料庫173
13.2.2連接資料庫174
13.2.3創建與刪除用戶174
13.2.4許可權管理176
13.3MySQL資料庫表管理177
13.3.1創建表177
13.3.2表結構178
13.3.3表主鍵178
13.3.4表索引179
13.4表資料操作181
13.4.1插入資料181
13.4.2查詢資料181
13.4.3修改（更新）資料182
13.4.4刪除資料183
13.4.5表字段的增刪184
13.4.6表更名185
13.4.7刪除表185

4章MySQL資料庫的備份與恢復187
14.1資料庫備份概述187
14.1.1全量與增量備份187
14.1.2資料庫備份方法188
14.2MySQL資料庫備份操作188
14.2.1庫備份188
14.2.2資料庫表和表結構備份191
14.2.3備份優化191
14.2.4不同資料庫引擎備份的注意事項192
14.3MySQL資料庫的恢復192
14.3.1使用source命令193
14.3.2使用mysql命令193
14.4MySQL物理備份工具XtraBackup193
14.4.1什麼是XtraBackup193
14.4.2XtraBackup的特點194
14.4.3XtraBackup的備份過程194
14.4.4XtraBackup的增量備份195
14.4.5XtraBackup的恢復195
14.4.6XtraBackup的安裝環境195
14.4.7安裝XtraBackup196
14.4.8XtraBackup的命令介紹196
14.4.9XtraBackup全量備份與資料恢復197
14.4.10XtraBackup增量備份與資料恢復200

5章無人值守批量安裝作業系統205
15.1PXE技術概述205
15.1.1什麼是PXE技術205
15.1.2PXE的工作過程205
15.2KickStart簡介206
15.3無人值守安裝準備207
15.3.1配置環境207
15.3.2配置HTTP服務207
15.3.3安裝與配置TFTP服務208
15.3.4安裝與配置DHCP服務209
15.4KickStart部署209
15.4.1配置PXE引導210
15.4.2修改用戶端設定檔210
15.4.3配置ks.cfg文件211
15.4.4用戶端無人值守安裝213


6章集群架構技術216
16.1集群概述217
16.1.1什麼是集群217
16.1.2集群架構的特性217
16.2集群的分類217
16.2.1負載均衡集群218
16.2.2高可用集群219
16.2.3常用集群軟硬體220
16.3企業集群架構反覆運算過程220
16.3.1初期架構220
16.3.2中期架構222
16.3.3終期架構223


7章Nginx負載均衡226
17.1負載均衡概述226
17.1.1為什麼要使用負載均衡226
17.1.2負載均衡簡介226
17.1.3負載均衡分類226
17.2Nginx負載均衡簡介227
17.3Nginx實現負載均衡的方式227
17.4Nginx負載均衡應用配置228
17.4.1環境準備228
17.4.2Nginx輪詢模式負載均衡配置228
17.4.3Nginx權重模式負載均衡配置229
17.4.4Nginxip_hash模式負載均衡配置231
17.4.5Nginx負載均衡模組參數232
17.5Nginx的7層代理負載均衡233
17.5.1根據目錄實現動靜態分離234
17.5.2通過匹配副檔名實現動靜態分離235


8章LVS負載均衡237
18.1LVS服務概述237
18.1.1LVS服務簡介237
18.1.2LVS的發展與組成237
18.1.3LVS相關的術語237
18.1.4為什麼需要LVS238
18.2LVS的工作模式238
18.2.1網路位址轉譯模式238
18.2.2隧道模式239
18.2.3直接路由模式241
18.2.4FullNAT模式242
18.3LVS調度演算法242
18.4LVS負載均衡部署244
18.4.1LVS服務DR模式部署244
18.4.2LVS服務NAT模式部署247
18.4.3LVS服務TUN模式部署249
18.5ipvsadm命令及參數介紹251


9章Keepalived高可用集群服務253
19.1高可用概述253
19.1.1什麼是高可用253
19.1.2如何構建高可用253
19.2Keepalived高可用服務254
19.2.1Keepalived服務介紹254
19.2.2Keepalived故障切換原理254
19.3Keepalived服務的部署與配置255
19.3.1部署環境255
19.3.2Keepalived服務的部署256
19.3.3Keepalived設定檔詳解257
19.3.4Keepalived實例配置258


第20章NoSQL資料庫服務的部署與管理264
20.1NoSQL資料庫簡介264
20.1.1什麼是NoSQL資料庫264
20.1.2NoSQL資料庫的分類264
20.1.3NoSQL資料庫的使用場景265
20.2Memcached服務的部署與配置265
20.2.1什麼是Memcached265
20.2.2Memcached的工作流程265
20.2.3Memcached的特性與應用場景266
20.2.4Memcached的部署與配置267
20.2.5Memcached操作命令268
20.3Redis服務的部署與配置270
20.3.1什麼是Redis270
20.3.2Redis的應用場景270
20.3.3Redis服務的部署271
20.3.4Redis服務的啟動與關閉271
20.3.5Redis的資料類型272
20.3.6Redis的管理命令275
20.3.7Redis事務與安全配置276
20.3.8Redis持久化、備份與恢復277

第21章JavaWeb應用伺服器Tomcat服務280
21.1Tomcat服務概述280
21.1.1Tomcat服務簡介280
21.1.2Tomcat名稱的由來280
21.1.3Tomcat常用版本介紹280
21.2Tomcat服務的部署281
21.2.1環境準備281
21.2.2安裝和啟動Tomcat282
21.3Tomcat服務的配置283
21.3.1Tomcat目錄結構及功能283
21.3.2Tomcatserver.xml設定檔簡介284
21.3.3Tomcat核心組件285
21.3.4Tomcat日誌切割286
21.4Tomcat性能優化287
21.4.1伺服器系統優化287
21.4.2網路優化288
21.4.3服務自身優化289
21.4.4集群化291

第22章Zabbix監控服務293
22.1監控體系概述293
22.1.1為什麼需要監控293
22.1.2監控目標與流程293
22.1.3監控的對象293
22.1.4監控工具295
22.2Zabbix簡介295
22.2.1什麼是Zabbix295
22.2.2Zabbix的功能296
22.2.3Zabbix的工作原理296
22.3Zabbix服務的部署與配置297
22.3.1部署環境297
22.3.2部署Zabbix297
22.3.3配置中文支援302
22.4Zabbix相關組件與概念303
22.4.1Zabbix的組件303
22.4.2Zabbix重要概念簡介303
22.5Zabbix監控實戰操作304
22.5.1Agent端的部署與配置304
22.5.2Web端添加被監控主機305
22.5.3繪製圖形展示306
22.5.4配置郵件報警通知310


第23章企業級資料庫監控服務
Lepus317
23.1Lepus概述317
23.1.1Lepus的由來317
23.1.2Lepus監控系統簡介317
23.1.3Lepus的功能與特性317
23.1.4Lepus解決的難題318
23.2Lepus的部署319
23.2.1安裝環境要求319
23.2.2LAMP基礎環境安裝319
23.2.3Python基礎模組安裝320
23.2.4Lepus採集器安裝321
23.2.5安裝Web管理端324
23.3Lepus配置管理實例326
23.3.1配置監控MySQL326
23.3.2配置監控OS328

第24章企業原始程式碼管理工具331
24.1常見的版本管理工具331
24.1.1VSS331
24.1.2CVS331
24.1.3SVN331
24.1.4Git331
24.2Git的安裝332
24.2.1安裝所需的依賴包332
24.2.2安裝Git332
24.3Git的工作流程與核心概念333
24.3.1Git的工作流程333
24.3.2Git的核心概念333
24.4Git的常用命令與基本操作333
24.4.1倉庫管理命令333
24.4.2分支管理命令334
24.4.3查看操作命令335
24.4.4其他命令336
24.5Git代碼伺服器的搭建336
24.5.1Git協議336
24.5.2環境準備337
24.5.3搭建代碼管理伺服器337

第25章Docker容器技術入門340
25.1Docker簡介340
25.1.1什麼是Docker340
25.1.2為什麼要使用Docker340
25.1.3Docker名詞術語341
25.2Docker的優點與應用場景342
25.2.1Docker的優點342
25.2.2Docker的應用場景342
25.3Docker的部署344
25.3.1Docker的部署要求344
25.3.2Docker的部署操作344
25.4Docker的網路模式345
25.4.1host模式345
25.4.2container模式345
25.4.3none模式345
25.4.4bridge模式346
25.5Docker的資料存儲346
25.5.1數據卷346
25.5.2容器卷350
25.6Docker容器的管理351
25.6.1Docker容器的創建與刪除351
25.6.2進入與退出容器352
25.6.3Docker容器的運行353
25.6.4Docker容器常用管理命令353


第26章Docker鏡像倉庫的構建與鏡像管理365
26.1Docker私有倉庫簡介365
26.1.1什麼是私有倉庫365
26.1.2為什麼需要私有倉庫365
26.2構建Docker私有倉庫365
26.2.1部署環境365
26.2.2服務端部署366
26.2.3用戶端配置367
26.3私有鏡像倉庫測試367
26.3.1用戶端測試環境準備367
26.3.2上傳鏡像368
26.3.3鏡像368
26.4Dockerfile概述369
26.4.1什麼是Dockerfile369
26.4.2Dockerfile的組成369
26.4.3Dockerfile的指令分類370
26.4.4Dockerfile指令詳解370
26.5通過Dockerfile快速構建鏡像372
26.5.1編輯Dockerfile檔373
26.5.2構建過程373
26.5.3通過構建的鏡像啟動容器374

第27章Docker三劍客375
27.1DockerMachine375
27.1.1什麼是DockerMachine375
27.1.2Docker與DockerMachine的區別375
27.1.3安裝DockerMachine375
27.1.4DockerMachine命令説明資訊376
27.1.5DockerMachine命令詳解377
27.1.6DockerMachine命令實例操作377
27.1.7DockerMachine配置實戰380
27.2DockerCompose382
27.2.1什麼是DockerCompose382
27.2.2DockerCompose的工作流程382
27.2.3DockerCompose的部署383
27.2.4DockerCompose管理命令383
27.2.5DockerCompose的設定檔385
27.2.6運行DockerCompose設定檔386
27.2.7DockerCompose配置實戰387
27.3DockerSwarm391
27.3.1什麼是Swarm391
27.3.2Swarm集群版本391
27.3.3Swarm的核心概念391
27.3.4Swarm服務的運行部分391
27.3.5Swarm的調度策略392
27.3.6如何創建Swarm集群392
27.3.7DockerSwarm常用管理命令393
27.3.8Swarm集群的部署394
27.3.9DockerSwarm部署服務實戰401


第28章自動化運維工具SaltStack服務404
28.1SaltStack簡介404
28.1.1什麼是SaltStack404
28.1.2SaltStack的功能與工作方式404
28.2SaltStack的安裝與部署405
28.2.1部署環境405
28.2.2SaltStack的安裝405
28.3SaltStack認證配置407
28.3.1salt-key命令407
28.3.2配置認證407
28.4SaltStack功能介紹408
28.4.1SaltStack資料系統408
28.4.2SaltStack檔案系統410
28.4.3SaltStack遠端執行411
28.4.4SaltStack配置管理414
28.5SaltStack的Job管理416
28.5.1Job簡介416
28.5.2Job的基本管理417
```
## 架構運用篇
```
第29章MySQL性能優化及主從同步架構實踐421
29.1資料庫優化421
29.1.1硬體性能優化421
29.1.2設定檔優化421
29.2MySQL主從同步概述423
29.2.1為什麼需要主從同步架構423
29.2.2MySQL主從同步的原理424
29.3MySQL主從同步架構實踐424
29.3.1環境準備424
29.3.2配置MySQL主從同步425
29.3.3驗證MySQL主從同步428
29.3.4MySQL主從同步常見故障的處理429


第30章MySQL高可用集群與讀寫分離架構實踐430
30.1MySQL高可用架構概述430
30.1.1主從架構430
30.1.2MySQLDRBD架構431
30.1.3MySQLMHA架構431
30.1.4MySQLMMM架構432
30.1.5MySQLCluster架構433
30.2MHA軟體概述433
30.2.1MHA簡介433
30.2.2MHA相關工具434
30.3MHA高可用的部署與配置434
30.3.1環境準備435
30.3.2配置SSH免密登錄436
30.3.3部署MHA軟體437
30.3.4MHA高可用方案配置437
30.3.5測試MHA故障切換440
30.3.6解決實際生產場景問題441
30.4MySQL讀寫分離架構實踐442
30.4.1什麼是讀寫分離443
30.4.2讀寫分離實現的方式443
30.4.3讀寫分離工具Atlas簡介443
30.4.4Atlas的部署與配置444

第31章搭建企業日誌分析平臺449
31.1日誌概述449
31.1.1日誌分類449
31.1.2日誌級別449
31.2ELK日誌系統449
31.2.1ELK日誌系統簡介450
31.2.2ELK日誌系統的部署450
31.2.3收集系統日誌並展示效果453
31.3配置Kibana登錄認證455

第32章Linux伺服器集群架構案例實踐457
32.1LVS+Keepalived集群實踐457
32.1.1部署環境457
32.1.2配置Keepalived457
32.1.3啟動服務並測試458
32.1.4測試故障切換460
32.2Nginx+Keepalived集群實踐460
32.2.1Keepalived與Nginx配置460
32.2.2Nginx+Keepalived雙主企業架構實踐463

第33章資料備份與運維管理467
33.1資料備份概述467
33.2企業常用的資料備份方法與實踐468
33.2.1企業常用的資料備份方法468
33.2.2資料備份實踐操作468
33.3運維管理470
33.3.1日常運維470
33.3.2數據運維471
33.3.3安全運維471

```
